<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="6123.477980678626" height="3775.6749113685014"><desc>sequenceDiagram%0A%20%20%20%20actor%20Admin%0A%20%20%20%20participant%20API%20as%20Express%20API%0A%20%20%20%20participant%20AuthMW%20as%20Auth%20Middleware%0A%20%20%20%20participant%20RoleMW%20as%20Role%20Middleware%0A%20%20%20%20participant%20Controller%20as%20OrderController%0A%20%20%20%20participant%20Service%20as%20OrderService%0A%20%20%20%20participant%20EmailService%20as%20EmailService%0A%20%20%20%20participant%20NotifService%20as%20NotificationService%0A%20%20%20%20participant%20Prisma%20as%20Prisma%20ORM%0A%20%20%20%20participant%20DB%20as%20PostgreSQL%0A%20%20%20%20participant%20Queue%20as%20Job%20Queue%20(Bull)%0A%0A%20%20%20%20Admin-%3E%3EAPI%3A%20PATCH%20%2Fapi%2Forders%2F%3AorderId%2Fstatus%0A%20%20%20%20Note%20over%20Admin%2CAPI%3A%20Body%3A%20%7B%20status%3A%20%22SHIPPED%22%2C%20tracking_number%3A%20%22123ABC%22%20%7D%0A%20%20%20%20%0A%20%20%20%20API-%3E%3EAuthMW%3A%20Verify%20JWT%20Token%0A%20%20%20%20alt%20Token%20invalide%0A%20%20%20%20%20%20%20%20AuthMW--%3E%3EAdmin%3A%20401%20Unauthorized%0A%20%20%20%20else%20Token%20valide%0A%20%20%20%20%20%20%20%20AuthMW-%3E%3ERoleMW%3A%20checkRole(%5B'ADMIN'%2C%20'MANAGER'%5D)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20alt%20Role%20insuffisant%0A%20%20%20%20%20%20%20%20%20%20%20%20RoleMW--%3E%3EAdmin%3A%20403%20Forbidden%0A%20%20%20%20%20%20%20%20else%20Role%20OK%0A%20%20%20%20%20%20%20%20%20%20%20%20RoleMW-%3E%3EController%3A%20updateOrderStatus(req%2C%20res)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20Controller-%3E%3EService%3A%20updateOrderStatus(orderId%2C%20newStatus)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EPrisma%3A%20prisma.order.findUnique(%7B%20where%3A%20%7B%20id%20%7D%2C%20include%3A%20%7B%20customer%20%7D%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20SELECT%20*%20FROM%20orders%20WHERE%20id%20%3D%20%3F%20WITH%20customer%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20alt%20Commande%20non%20trouv%C3%A9e%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20OrderNotFoundError%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Controller--%3E%3EAdmin%3A%20404%20Not%20Found%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20Commande%20trouv%C3%A9e%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20Order%20with%20customer%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20Order%20object%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EService%3A%20validateStatusTransition(currentStatus%2C%20newStatus)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Note%20over%20Service%3A%20Ex%3A%20PENDING%20-%3E%20CANCELLED%20(OK)%3Cbr%2F%3EDELIVERED%20-%3E%20PENDING%20(NOK)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20alt%20Transition%20invalide%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20InvalidTransitionError%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Controller--%3E%3EAdmin%3A%20400%20Bad%20Request%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20Transition%20valide%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EPrisma%3A%20prisma.order.update(%7B%20where%3A%20%7B%20id%20%7D%2C%20data%3A%20%7B%20status%20%7D%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20UPDATE%20orders%20SET%20status%20%3D%20%3F%2C%20updated_at%20%3D%20NOW()%20WHERE%20id%20%3D%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20Order%20updated%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20Updated%20order%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20par%20Envoi%20notifications%20en%20parall%C3%A8le%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EQueue%3A%20addJob('send-email'%2C%20%7B%20orderId%2C%20status%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Queue-%3E%3EEmailService%3A%20processEmailJob(jobData)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20EmailService-%3E%3EEmailService%3A%20sendOrderStatusEmail(customer.email%2C%20order)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Note%20over%20EmailService%3A%20Envoi%20email%20via%20SendGrid%2FMailgun%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20EmailService--%3E%3EQueue%3A%20Email%20sent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EQueue%3A%20addJob('send-notification'%2C%20%7B%20orderId%2C%20status%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Queue-%3E%3ENotifService%3A%20processNotificationJob(jobData)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20NotifService-%3E%3ENotifService%3A%20sendPushNotification(customer.id%2C%20message)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Note%20over%20NotifService%3A%20Push%20notification%20via%20Firebase%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20NotifService--%3E%3EQueue%3A%20Notification%20sent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EPrisma%3A%20prisma.orderHistory.create(%7B%20data%3A%20%7B...%7D%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Note%20over%20Service%2CPrisma%3A%20Log%20du%20changement%20de%20statut%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20INSERT%20INTO%20order_history%20(order_id%2C%20old_status%2C%20new_status%2C%20changed_by)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20History%20created%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20Updated%20order%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Controller--%3E%3EAdmin%3A%20200%20OK%20%2B%20Order%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20end</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="6123" height="3775"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 197.90727075000004 142.09742039850002 L 197.90727075000004 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 337.66059944037505 142.09742039850002 L 337.66059944037505 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 579.781070306086 142.09742039850002 L 579.781070306086 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 852.4491485936719 142.09742039850002 L 852.4491485936719 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1124.7056134169025 142.09742039850002 L 1124.7056134169025 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1381.8904763724572 142.09742039850002 L 1381.8904763724572 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1642.3287267791839 142.09742039850002 L 1642.3287267791839 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1935.361810559934 142.09742039850002 L 1935.361810559934 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2207.603947380235 142.09742039850002 L 2207.603947380235 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2429.742332064305 142.09742039850002 L 2429.742332064305 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2664.142702527184 142.09742039850002 L 2664.142702527184 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2848.4321339641842 142.09742039850002 L 2848.4321339641842 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3032.85066197727 142.09742039850002 L 3032.85066197727 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3330.2755834229733 142.09742039850002 L 3330.2755834229733 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3583.978245347192 142.09742039850002 L 3583.978245347192 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 142.09742039850002 L 3911.0309286337156 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4383.137246563794 142.09742039850002 L 4383.137246563794 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4948.386005289771 142.09742039850002 L 4948.386005289771 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5064.225218526087 142.09742039850002 L 5064.225218526087 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5306.510552569446 142.09742039850002 L 5306.510552569446 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5653.083869306165 142.09742039850002 L 5653.083869306165 3775.6749113685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/></g><g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 212.94822332700005 30.477719695500014 A 15.040952577 15.040952577 0 1 1 212.9482158065244 30.46267874542983" stroke-miterlimit="10" stroke-width="4.485898137" stroke-dasharray=""/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 197.90727075000004 45.51867227250001 L 197.90727075000004 77.7115883145 M 178.90817275800003 57.12923215650002 L 216.90636874200004 57.12923215650002 M 197.90727075000004 77.7115883145 L 178.90817275800003 107.79349346850002 M 197.90727075000004 77.7115883145 L 216.90636874200004 107.79349346850002" stroke-miterlimit="10" stroke-width="4.485898137"/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="177.13061364550785" y="134.1811295685" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Admin</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 245.07156395449223 70.85080292850002 L 430.24963492625784 70.85080292850002 L 430.24963492625784 142.09742039850002 L 245.07156395449223 142.09742039850002 L 245.07156395449223 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="273.70214912299224" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">API as Express API</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 456.63727102625785 70.85080292850002 L 702.9248695859142 70.85080292850002 L 702.9248695859142 142.09742039850002 L 456.63727102625785 142.09742039850002 L 456.63727102625785 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="485.2678561947579" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthMW as Auth Middleware</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 729.3125056859141 70.85080292850002 L 975.5857915014296 70.85080292850002 L 975.5857915014296 142.09742039850002 L 729.3125056859141 142.09742039850002 L 729.3125056859141 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="757.9430908544141" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RoleMW as Role Middleware</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1001.9734276014298 70.85080292850002 L 1247.437799232375 70.85080292850002 L 1247.437799232375 142.09742039850002 L 1001.9734276014298 142.09742039850002 L 1001.9734276014298 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1030.6040127699298" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Controller as OrderController</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1273.8254353323753 70.85080292850002 L 1489.9555174125394 70.85080292850002 L 1489.9555174125394 142.09742039850002 L 1273.8254353323753 142.09742039850002 L 1273.8254353323753 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1302.4560205008752" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Service as OrderService</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1516.3431535125394 70.85080292850002 L 1768.3143000458285 70.85080292850002 L 1768.3143000458285 142.09742039850002 L 1516.3431535125394 142.09742039850002 L 1516.3431535125394 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1544.9737386810393" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">EmailService as EmailService</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1794.7019361458285 70.85080292850002 L 2076.0216849740395 70.85080292850002 L 2076.0216849740395 142.09742039850002 L 1794.7019361458285 142.09742039850002 L 1794.7019361458285 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1823.3325213143285" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">NotifService as NotificationService</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2102.4093210740393 70.85080292850002 L 2312.79857368643 70.85080292850002 L 2312.79857368643 142.09742039850002 L 2102.4093210740393 142.09742039850002 L 2102.4093210740393 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2131.0399062425395" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Prisma as Prisma ORM</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2339.18620978643 70.85080292850002 L 2520.29845434218 70.85080292850002 L 2520.29845434218 142.09742039850002 L 2339.18620978643 142.09742039850002 L 2339.18620978643 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2367.81679495493" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DB as PostgreSQL</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2546.68609044218 70.85080292850002 L 2781.5993146121878 70.85080292850002 L 2781.5993146121878 142.09742039850002 L 2546.68609044218 142.09742039850002 L 2546.68609044218 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2575.3166756106802" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Queue as Job Queue (Bull)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2807.986950712188 70.85080292850002 L 2888.87731721618 70.85080292850002 L 2888.87731721618 142.09742039850002 L 2807.986950712188 142.09742039850002 L 2807.986950712188 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2836.617535880688" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">API</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2976.117003688653 70.85080292850002 L 3089.584320265887 70.85080292850002 L 3089.584320265887 142.09742039850002 L 2976.117003688653 142.09742039850002 L 2976.117003688653 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3004.747588857153" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthMW</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3273.545503320391 70.85080292850002 L 3387.005663525555 70.85080292850002 L 3387.005663525555 142.09742039850002 L 3273.545503320391 142.09742039850002 L 3273.545503320391 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3302.1760884888913" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RoleMW</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3523.572445029766 70.85080292850002 L 3644.3840456646176 70.85080292850002 L 3644.3840456646176 142.09742039850002 L 3523.572445029766 142.09742039850002 L 3523.572445029766 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3552.2030301982663" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Controller</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3857.958700703985 70.85080292850002 L 3964.1031565634457 70.85080292850002 L 3964.1031565634457 142.09742039850002 L 3857.958700703985 142.09742039850002 L 3857.958700703985 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3886.589285872485" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Service</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 4331.700661639435 70.85080292850002 L 4434.573831488154 70.85080292850002 L 4434.573831488154 142.09742039850002 L 4331.700661639435 142.09742039850002 L 4331.700661639435 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4360.331246807935" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Prisma</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 4909.5728868571105 70.85080292850002 L 4987.199123722431 70.85080292850002 L 4987.199123722431 142.09742039850002 L 4909.5728868571105 142.09742039850002 L 4909.5728868571105 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4938.203472025611" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DB</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 5013.58675982243 70.85080292850002 L 5114.863677229743 70.85080292850002 L 5114.863677229743 142.09742039850002 L 5013.58675982243 142.09742039850002 L 5013.58675982243 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5042.2173449909305" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Queue</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 5235.109772393622 70.85080292850002 L 5377.911332745271 70.85080292850002 L 5377.911332745271 142.09742039850002 L 5235.109772393622 142.09742039850002 L 5235.109772393622 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5263.740357562122" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">EmailService</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 5584.940062396942 70.85080292850002 L 5721.227676215388 70.85080292850002 L 5721.227676215388 142.09742039850002 L 5584.940062396942 142.09742039850002 L 5584.940062396942 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5613.570647565442" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">NotifService</text></g></g><g><g><rect fill="white" stroke="none" x="1409.898782283889" y="194.8726925985" width="226.54184014640626" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1413.856927698889" y="218.6215650885" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PATCH /api/orders/:orderId/status</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 197.90727075000004 229.17661952850003 L 2845.133679451684 229.17661952850003" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2848.4321339641842,229.17661952850003) translate(-2848.4321339641842,-229.17661952850003)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2825.8244314992507 219.09113128249294 L 2845.9601111044503 229.17661952850003 L 2825.8244314992507 239.26210777450711" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2879.657503349184" y="268.75807367850007" width="121.96778924308593" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2883.6156487641842" y="292.50694616850006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verify JWT Token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2848.4321339641842 303.06200060850006 L 3029.55220746477 303.06200060850006" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3032.85066197727,303.06200060850006) translate(-3032.85066197727,-303.06200060850006)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3010.2429595123367 292.97651236249294 L 3030.3786391175363 303.06200060850006 L 3010.2429595123367 313.1474888545072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1553.5539844007835" y="413.89007222850006" width="123.64996392570312" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1557.5121298157835" y="437.63894471850006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">401 Unauthorized</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3032.85066197727 448.19399915850005 L 201.20572526250004 448.19399915850005" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(197.90727075000004,448.19399915850005) translate(-197.90727075000004,-448.19399915850005)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 220.5149732149335 438.10851091249293 L 200.37929360973382 448.19399915850005 L 220.5149732149335 458.27948740450717" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3064.07603136227" y="559.0220707785" width="234.97418267570313" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3068.03417677727" y="582.7709432685001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">checkRole(['ADMIN', 'MANAGER'])</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3032.85066197727 593.3259977085 L 3326.9771289104733 593.3259977085" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3330.2755834229733,593.3259977085) translate(-3330.2755834229733,-593.3259977085)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3307.66788095804 583.240509462493 L 3327.8035605632394 593.3259977085 L 3307.66788095804 603.411485954507" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1712.8605689639671" y="704.1540693285001" width="102.46171624503906" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1716.8187143789671" y="727.9029418185002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">403 Forbidden</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3330.2755834229733 738.4579962585001 L 201.20572526250004 738.4579962585001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(197.90727075000004,738.4579962585001) translate(-197.90727075000004,-738.4579962585001)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 220.5149732149335 728.3725080124931 L 200.37929360973382 738.4579962585001 L 220.5149732149335 748.5434845045071" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3361.500952807973" y="849.2860678785001" width="191.25192315421876" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3365.4590982229734" y="873.0349403685002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">updateOrderStatus(req, res)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3330.2755834229733 883.5899948085001 L 3580.679790834692 883.5899948085001" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3583.978245347192,883.5899948085001) translate(-3583.978245347192,-883.5899948085001)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3561.3705428822586 873.5045065624931 L 3581.506222487458 883.5899948085001 L 3561.3705428822586 893.6754830545071" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3615.203614732192" y="923.1714489585002" width="264.6019597753125" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3619.161760147192" y="946.9203214485002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">updateOrderStatus(orderId, newStatus)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3583.978245347192 957.4753758885001 L 3907.7324741212155 957.4753758885001" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3911.0309286337156,957.4753758885001) translate(-3911.0309286337156,-957.4753758885001)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3888.423226168782 947.3898876424931 L 3908.5589057739817 957.4753758885001 L 3888.423226168782 967.5608641345071" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3942.256298018716" y="997.0568300385" width="409.65560967765623" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3946.214443433716" y="1020.8057025285001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prisma.order.findUnique({ where: { id }, include: { customer } })</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 1031.3607569685 L 4379.838792051294 1031.3607569685" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4383.137246563794,1031.3607569685) translate(-4383.137246563794,-1031.3607569685)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4360.529544098861 1021.275268722493 L 4380.665223704061 1031.3607569685 L 4360.529544098861 1041.4462452145071" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4479.537939435122" y="1070.9422111185002" width="372.4474187596875" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4483.496084850122" y="1094.6910836085" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SELECT * FROM orders WHERE id = ? WITH customer</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4383.137246563794 1105.2461380485001 L 4945.087550777271 1105.2461380485001" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4948.386005289771,1105.2461380485001) translate(-4948.386005289771,-1105.2461380485001)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4925.778302824838 1095.160649802493 L 4945.913982430037 1105.2461380485001 L 4925.778302824838 1115.3316262945073" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4650.393324261782" y="1216.0742096685" width="30.73660333" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4654.3514696767825" y="1239.8230821585" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">null</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4948.386005289771 1250.3781365985 L 4386.435701076294 1250.3781365985" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(4383.137246563794,1250.3781365985) translate(-4383.137246563794,-1250.3781365985)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4405.744949028727 1240.292648352493 L 4385.609269423528 1250.3781365985 L 4405.744949028727 1260.4636248445072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4131.715785933755" y="1289.9595907485002" width="30.73660333" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4135.673931348755" y="1313.7084632385001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">null</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4383.137246563794 1324.2635176785002 L 3914.3293831462156 1324.2635176785002" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3911.0309286337156,1324.2635176785002) translate(-3911.0309286337156,-1324.2635176785002)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3933.638631098649 1314.178029432493 L 3913.5029514934495 1324.2635176785002 L 3933.638631098649 1334.3490059245073" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3676.33100273268" y="1363.8449718285003" width="142.34716851554688" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3680.2891481476804" y="1387.5938443185003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">OrderNotFoundError</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 1398.1488987585003 L 3587.276699859692 1398.1488987585003" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3583.978245347192,1398.1488987585003) translate(-3583.978245347192,-1398.1488987585003)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3606.5859478121256 1388.0634105124932 L 3586.450268206926 1398.1488987585003 L 3606.5859478121256 1408.2343870045074" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1838.491418053518" y="1437.7303529085004" width="104.90267999015624" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1842.449563468518" y="1461.4792253985004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">404 Not Found</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3583.978245347192 1472.0342798385004 L 201.20572526250004 1472.0342798385004" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(197.90727075000004,1472.0342798385004) translate(-197.90727075000004,-1472.0342798385004)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 220.5149732149335 1461.9487915924933 L 200.37929360973382 1472.0342798385004 L 220.5149732149335 1482.1197680845075" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4595.815672284243" y="1582.8623514585004" width="139.89190728507813" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4599.773817699243" y="1606.6112239485003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Order with customer</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4948.386005289771 1617.1662783885004 L 4386.435701076294 1617.1662783885004" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(4383.137246563794,1617.1662783885004) translate(-4383.137246563794,-1617.1662783885004)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4405.744949028727 1607.0807901424932 L 4385.609269423528 1617.1662783885004 L 4405.744949028727 1627.2517666345075" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4102.793102217935" y="1656.7477325385005" width="88.58197076164062" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4106.751247632935" y="1680.4966050285004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Order object</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4383.137246563794 1691.0516594685005 L 3914.3293831462156 1691.0516594685005" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3911.0309286337156,1691.0516594685005) translate(-3911.0309286337156,-1691.0516594685005)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3933.638631098649 1680.9661712224934 L 3913.5029514934495 1691.0516594685005 L 3933.638631098649 1701.1371477145076" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3942.2562980187154" y="1730.6331136185006" width="337.37927300773435" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3946.2144434337156" y="1754.3819861085005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">validateStatusTransition(currentStatus, newStatus)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 1764.9370405485006 L 4016.5814730337156 1764.9370405485006 L 4016.5814730337156 1799.2409674785006 L 3914.3293831462156 1799.2409674785006" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3911.0309286337156,1799.2409674785006) translate(-3911.0309286337156,-1799.2409674785006)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3933.638631098649 1789.1554792324935 L 3913.5029514934495 1799.2409674785006 L 3933.638631098649 1809.3264557245077" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3674.158509751723" y="1910.0690390985008" width="146.69215447746095" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3678.1166551667234" y="1933.8179115885007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">InvalidTransitionError</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 1944.3729660285007 L 3587.276699859692 1944.3729660285007" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3583.978245347192,1944.3729660285007) translate(-3583.978245347192,-1944.3729660285007)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3606.5859478121256 1934.2874777824936 L 3586.450268206926 1944.3729660285007 L 3606.5859478121256 1954.4584542745079" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1830.338242699514" y="1983.9544201785009" width="121.20903069816406" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1834.296388114514" y="2007.7032926685008" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">400 Bad Request</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3583.978245347192 2018.2583471085009 L 201.20572526250004 2018.2583471085009" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(197.90727075000004,2018.2583471085009) translate(-197.90727075000004,-2018.2583471085009)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 220.5149732149335 2008.1728588624937 L 200.37929360973382 2018.2583471085009 L 220.5149732149335 2028.343835354508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3974.432369185708" y="2129.0864187285006" width="345.30343682609373" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3978.3905146007082" y="2152.8352912185005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prisma.order.update({ where: { id }, data: { status } })</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 2163.390345658501 L 4379.838792051294 2163.390345658501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4383.137246563794,2163.390345658501) translate(-4383.137246563794,-2163.390345658501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4360.529544098861 2153.3048574124937 L 4380.665223704061 2163.390345658501 L 4360.529544098861 2173.475833904508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4438.088423138735" y="2202.9717998085007" width="455.34640557609373" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4442.046568553736" y="2226.7206722985006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">UPDATE orders SET status = ?, updated_at = NOW() WHERE id = ?</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4383.137246563794 2237.275726738501 L 4945.087550777271 2237.275726738501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4948.386005289771,2237.275726738501) translate(-4948.386005289771,-2237.275726738501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4925.778302824838 2227.190238492494 L 4945.913982430037 2237.275726738501 L 4925.778302824838 2247.361214984508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4614.534345990298" y="2276.857180888501" width="102.45455987296874" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4618.492491405298" y="2300.6060533785007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Order updated</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4948.386005289771 2311.161107818501 L 4386.435701076294 2311.161107818501" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(4383.137246563794,2311.161107818501) translate(-4383.137246563794,-2311.161107818501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4405.744949028727 2301.075619572494 L 4385.609269423528 2311.161107818501 L 4405.744949028727 2321.246596064508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4096.264827681802" y="2350.742561968501" width="101.63851983390624" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4100.222973096802" y="2374.491434458501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Updated order</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4383.137246563794 2385.046488898501 L 3914.3293831462156 2385.046488898501" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3911.0309286337156,2385.046488898501) translate(-3911.0309286337156,-2385.046488898501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3933.638631098649 2374.961000652494 L 3913.5029514934495 2385.046488898501 L 3933.638631098649 2395.1319771445083" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4356.193258853377" y="2495.874560518501" width="262.86962945304685" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4360.1514042683775" y="2519.623433008501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">addJob('send-email', { orderId, status })</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 2530.178487448501 L 5060.926764013587 2530.178487448501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(5064.225218526087,2530.178487448501) translate(-5064.225218526087,-2530.178487448501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5041.617516061154 2520.092999202494 L 5061.753195666353 2530.178487448501 L 5041.617516061154 2540.263975694508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="5095.450587911087" y="2569.759941598501" width="179.83459527335938" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5099.408733326087" y="2593.508814088501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">processEmailJob(jobData)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5064.225218526087 2604.063868528501 L 5303.212098056946 2604.063868528501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(5306.510552569446,2604.063868528501) translate(-5306.510552569446,-2604.063868528501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5283.902850104513 2593.978380282494 L 5304.038529709713 2604.063868528501 L 5283.902850104513 2614.1493567745083" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="5337.735921954446" y="2643.645322678501" width="306.11227471671873" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5341.694067369446" y="2667.394195168501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sendOrderStatusEmail(customer.email, order)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5306.510552569446 2677.949249608501 L 5412.061096969446 2677.949249608501 L 5412.061096969446 2712.253176538501 L 5309.809007081946 2712.253176538501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(5306.510552569446,2712.253176538501) translate(-5306.510552569446,-2712.253176538501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5329.118255034379 2702.167688292494 L 5308.98257542918 2712.253176538501 L 5329.118255034379 2722.338664784508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="5147.189998311477" y="2751.834630688501" width="76.35577447257812" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5151.148143726477" y="2775.583503178501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Email sent</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5306.510552569446 2786.138557618501 L 5067.523673038587 2786.138557618501" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(5064.225218526087,2786.138557618501) translate(-5064.225218526087,-2786.138557618501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5086.83292099102 2776.053069372494 L 5066.69724138582 2786.138557618501 L 5086.83292099102 2796.2240458645083" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4338.666426272811" y="2825.720011768501" width="297.9232488378125" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4342.624571687811" y="2849.468884258501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">addJob('send-notification', { orderId, status })</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 2860.0239386985013 L 5060.926764013587 2860.0239386985013" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(5064.225218526087,2860.0239386985013) translate(-5064.225218526087,-2860.0239386985013)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5041.617516061154 2849.938450452494 L 5061.753195666353 2860.0239386985013 L 5041.617516061154 2870.1094269445084" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="5250.805971865383" y="2899.605392848501" width="215.69714410148438" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5254.764117280383" y="2923.354265338501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">processNotificationJob(jobData)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5064.225218526087 2933.9093197785014 L 5649.785414793665 2933.9093197785014" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(5653.083869306165,2933.9093197785014) translate(-5653.083869306165,-2933.9093197785014)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5630.476166841232 2923.8238315324943 L 5650.611846446432 2933.9093197785014 L 5630.476166841232 2943.9948080245085" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="5684.309238691165" y="2973.4907739285013" width="297.99490411125" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5688.267384106165" y="2997.2396464185013" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sendPushNotification(customer.id, message)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5653.083869306165 3007.794700858501 L 5758.634413706165 3007.794700858501 L 5758.634413706165 3042.0986277885013 L 5656.382323818665 3042.0986277885013" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(5653.083869306165,3042.0986277885013) translate(-5653.083869306165,-3042.0986277885013)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5675.691571771098 3032.013139542494 L 5655.5558921658985 3042.0986277885013 L 5675.691571771098 3052.1841160345084" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="5302.545382265774" y="3081.680081938501" width="112.21832330070312" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5306.503527680774" y="3105.428954428501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Notification sent</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5653.083869306165 3115.9840088685014 L 5067.523673038587 3115.9840088685014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(5064.225218526087,3115.9840088685014) translate(-5064.225218526087,-3115.9840088685014)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5086.83292099102 3105.8985206224943 L 5066.69724138582 3115.9840088685014 L 5086.83292099102 3126.0694971145085" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4014.1174048912744" y="3155.5654630185013" width="265.93338067375" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4018.0755503062746" y="3179.3143355085012" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prisma.orderHistory.create({ data: {...} })</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 3189.8693899485015 L 4379.838792051294 3189.8693899485015" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4383.137246563794,3189.8693899485015) translate(-4383.137246563794,-3189.8693899485015)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4360.529544098861 3179.7839017024944 L 4380.665223704061 3189.8693899485015 L 4360.529544098861 3199.9548781945086" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4414.362615948794" y="3229.4508440985014" width="502.79806573234373" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4418.320761363794" y="3253.1997165885014" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">INSERT INTO order_history (order_id, old_status, new_status, changed_by)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4383.137246563794 3263.7547710285016 L 4945.087550777271 3263.7547710285016" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4948.386005289771,3263.7547710285016) translate(-4948.386005289771,-3263.7547710285016)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4925.778302824838 3253.6692827824945 L 4945.913982430037 3263.7547710285016 L 4925.778302824838 3273.8402592745088" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4612.5121673403955" y="3303.3362251785015" width="106.49891717277343" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4616.470312755396" y="3327.0850976685015" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">History created</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4948.386005289771 3337.6401521085018 L 4386.435701076294 3337.6401521085018" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(4383.137246563794,3337.6401521085018) translate(-4383.137246563794,-3337.6401521085018)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4405.744949028727 3327.5546638624946 L 4385.609269423528 3337.6401521085018 L 4405.744949028727 3347.725640354509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3696.6853270735005" y="3416.8030604085016" width="101.63851983390624" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3700.6434724885007" y="3440.5519328985015" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Updated order</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3911.0309286337156 3451.1069873385018 L 3587.276699859692 3451.1069873385018" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3583.978245347192,3451.1069873385018) translate(-3583.978245347192,-3451.1069873385018)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3606.5859478121256 3441.0214990924947 L 3586.450268206926 3451.1069873385018 L 3606.5859478121256 3461.192475584509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1818.7348033684593" y="3490.6884414885017" width="144.41590936027345" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1822.6929487834593" y="3514.4373139785016" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">200 OK + Order data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3583.978245347192 3524.992368418502 L 201.20572526250004 3524.992368418502" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(197.90727075000004,3524.992368418502) translate(-197.90727075000004,-3524.992368418502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 220.5149732149335 3514.9068801724948 L 200.37929360973382 3524.992368418502 L 220.5149732149335 3535.077856664509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 26.38763610000001 342.64345475850007 L 6097.090344578626 342.64345475850007 L 6097.090344578626 3683.3181850185015 L 26.38763610000001 3683.3181850185015 L 26.38763610000001 342.64345475850007 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 26.38763610000001 342.64345475850007 L 26.38763610000001 374.30861807850005 L 92.85170529707032 374.30861807850005 L 108.68428695707033 358.4760364185001 L 108.68428695707033 342.64345475850007 L 26.38763610000001 342.64345475850007" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="52.77527220000001" y="363.75356363850005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="131.11377764207035" y="344.7544656465001" width="96.33793694816406" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="135.07192305707034" y="363.75356363850005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Token invalide]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 26.38763610000001 487.77545330850006 L 6097.090344578626 487.77545330850006" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="131.11377764207035" y="489.8864641965" width="85.91383416496093" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="135.07192305707034" y="508.88556218850005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Token valide]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 632.9074518585 L 6070.702708478626 632.9074518585 L 6070.702708478626 3643.7367308685016 L 52.77527220000002 3643.7367308685016 L 52.77527220000002 632.9074518585 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 632.9074518585 L 52.77527220000002 664.5726151785001 L 119.23934139707033 664.5726151785001 L 135.07192305707034 648.7400335185 L 135.07192305707034 632.9074518585 L 52.77527220000002 632.9074518585" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="79.16290830000003" y="654.0175607385" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="157.50141374207035" y="635.0184627465001" width="103.70925958" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="654.0175607385" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Role insuffisant]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 778.0394504085001 L 6070.702708478626 778.0394504085001" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="157.50141374207035" y="780.1504612965001" width="62.0013738378125" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="799.1495592885001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Role OK]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 79.16290830000003 1144.8275921985003 L 6044.315072378626 1144.8275921985003 L 6044.315072378626 3604.155276718502 L 79.16290830000003 3604.155276718502 L 79.16290830000003 1144.8275921985003 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 79.16290830000003 1144.8275921985003 L 79.16290830000003 1176.4927555185002 L 145.62697749707036 1176.4927555185002 L 161.45955915707034 1160.6601738585002 L 161.45955915707034 1144.8275921985003 L 79.16290830000003 1144.8275921985003" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="105.55054440000004" y="1165.9377010785001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="183.88904984207036" y="1146.9386030865" width="149.98776299796876" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="187.84719525707035" y="1165.9377010785001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Commande non trouvée]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 79.16290830000003 1511.6157339885006 L 6044.315072378626 1511.6157339885006" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="183.88904984207036" y="1513.7267448765003" width="125.23336846671874" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="187.84719525707035" y="1532.7258428685004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Commande trouvée]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 105.55054440000004 1838.8224216285007 L 6017.927436278626 1838.8224216285007 L 6017.927436278626 3564.573822568502 L 105.55054440000004 3564.573822568502 L 105.55054440000004 1838.8224216285007 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 105.55054440000004 1838.8224216285007 L 105.55054440000004 1870.4875849485006 L 172.01461359707037 1870.4875849485006 L 187.84719525707035 1854.6550032885007 L 187.84719525707035 1838.8224216285007 L 105.55054440000004 1838.8224216285007" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="131.93818050000004" y="1859.9325305085006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="210.27668594207037" y="1840.9334325165005" width="118.71537835441406" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="214.23483135707036" y="1859.9325305085006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Transition invalide]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 105.55054440000004 2057.8398012585008 L 6017.927436278626 2057.8398012585008" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="210.27668594207037" y="2059.950812146501" width="108.29127557121093" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="214.23483135707036" y="2078.949910138501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Transition valide]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3818.6742022837157 2424.627943048501 L 5991.539800178626 2424.627943048501 L 5991.539800178626 3377.2216062585017 L 3818.6742022837157 3377.2216062585017 L 3818.6742022837157 2424.627943048501 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3818.6742022837157 2424.627943048501 L 3818.6742022837157 2456.293106368501 L 3889.7031213343016 2456.293106368501 L 3905.5357029943016 2440.460524708501 L 3905.5357029943016 2424.627943048501 L 3818.6742022837157 2424.627943048501" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="3845.0618383837154" y="2445.738051928501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">par</text><g><rect fill="white" stroke="none" x="3927.965193679301" y="2426.7389539365013" width="188.45953423820313" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="3931.9233390943014" y="2445.738051928501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Envoi notifications en parallèle]</text></g></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></g></svg>