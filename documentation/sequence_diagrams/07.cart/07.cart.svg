<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="4582.7022281945865" height="7133.765481454509"><desc>sequenceDiagram%0A%20%20%20%20actor%20User%0A%20%20%20%20participant%20Frontend%20as%20Frontend%20App%0A%20%20%20%20participant%20API%20as%20Express%20API%0A%20%20%20%20participant%20AuthMW%20as%20Auth%20Middleware%20(Optional)%0A%20%20%20%20participant%20Controller%20as%20CartController%0A%20%20%20%20participant%20Service%20as%20CartService%0A%20%20%20%20participant%20Redis%20as%20Redis%20Cache%0A%20%20%20%20participant%20Prisma%20as%20Prisma%20ORM%0A%20%20%20%20participant%20DB%20as%20PostgreSQL%0A%0A%20%20%20%20rect%20rgb(200%2C%20220%2C%20250)%0A%20%20%20%20Note%20over%20User%2CDB%3A%20AJOUTER%20AU%20PANIER%0A%20%20%20%20User-%3E%3EFrontend%3A%20Click%20%22Ajouter%20au%20panier%22%0A%20%20%20%20Frontend-%3E%3EAPI%3A%20POST%20%2Fapi%2Fcart%2Fitems%0A%20%20%20%20Note%20over%20Frontend%2CAPI%3A%20Body%3A%20%7B%20product_id%3A%201%2C%20quantity%3A%202%20%7D%3Cbr%2F%3ECookie%3A%20session_id%20OR%20JWT%20token%0A%20%20%20%20%0A%20%20%20%20API-%3E%3EAuthMW%3A%20Check%20authentication%20(optional)%0A%20%20%20%20%0A%20%20%20%20alt%20Utilisateur%20connect%C3%A9%0A%20%20%20%20%20%20%20%20AuthMW-%3E%3EController%3A%20addToCart(req%2C%20res)%20%5Buser_id%20from%20token%5D%0A%20%20%20%20%20%20%20%20Note%20over%20Controller%3A%20cartKey%20%3D%20%22cart%3Auser%3A123%22%0A%20%20%20%20else%20Utilisateur%20anonyme%0A%20%20%20%20%20%20%20%20AuthMW-%3E%3EController%3A%20addToCart(req%2C%20res)%20%5Bsession_id%20from%20cookie%5D%0A%20%20%20%20%20%20%20%20Note%20over%20Controller%3A%20cartKey%20%3D%20%22cart%3Asession%3Aabc123%22%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20Controller-%3E%3EService%3A%20addItem(cartKey%2C%20productId%2C%20quantity)%0A%20%20%20%20%0A%20%20%20%20Service-%3E%3EPrisma%3A%20prisma.product.findUnique(%7B%20where%3A%20%7B%20id%20%7D%20%7D)%0A%20%20%20%20Prisma-%3E%3EDB%3A%20SELECT%20*%20FROM%20products%20WHERE%20id%20%3D%20%3F%0A%20%20%20%20%0A%20%20%20%20alt%20Produit%20non%20trouv%C3%A9%0A%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20null%0A%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20null%0A%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20ProductNotFoundError%0A%20%20%20%20%20%20%20%20Controller--%3E%3EFrontend%3A%20404%20Not%20Found%0A%20%20%20%20else%20Produit%20trouv%C3%A9%0A%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20Product%20data%0A%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20Product%20object%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service-%3E%3EService%3A%20checkStockAvailability(product%2C%20quantity)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20alt%20Stock%20insuffisant%0A%20%20%20%20%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20OutOfStockError%0A%20%20%20%20%20%20%20%20%20%20%20%20Controller--%3E%3EFrontend%3A%20400%20Bad%20Request%20(Stock%3A%201%2C%20Demand%C3%A9%3A%202)%0A%20%20%20%20%20%20%20%20else%20Stock%20OK%0A%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3ERedis%3A%20GET%20cartKey%0A%20%20%20%20%20%20%20%20%20%20%20%20Redis--%3E%3EService%3A%20Current%20cart%20data%20(JSON)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EService%3A%20updateCartItems(cart%2C%20product%2C%20quantity)%0A%20%20%20%20%20%20%20%20%20%20%20%20Note%20over%20Service%3A%20Ajoute%20ou%20met%20%C3%A0%20jour%20item%3Cbr%2F%3ERecalcule%20le%20total%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3ERedis%3A%20SET%20cartKey%20cartData%20EX%20604800%0A%20%20%20%20%20%20%20%20%20%20%20%20Note%20over%20Redis%3A%20Expiration%3A%207%20jours%0A%20%20%20%20%20%20%20%20%20%20%20%20Redis--%3E%3EService%3A%20OK%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20Updated%20cart%0A%20%20%20%20%20%20%20%20%20%20%20%20Controller--%3E%3EFrontend%3A%20200%20OK%20%2B%20%7B%20cart%2C%20total%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20Frontend--%3E%3EUser%3A%20Badge%20panier%20mis%20%C3%A0%20jour%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20end%0A%20%20%20%20end%0A%0A%20%20%20%20rect%20rgb(250%2C%20220%2C%20200)%0A%20%20%20%20Note%20over%20User%2CDB%3A%20VOIR%20LE%20PANIER%0A%20%20%20%20User-%3E%3EFrontend%3A%20Navigate%20to%20%2Fcart%0A%20%20%20%20Frontend-%3E%3EAPI%3A%20GET%20%2Fapi%2Fcart%0A%20%20%20%20%0A%20%20%20%20API-%3E%3EController%3A%20getCart(req%2C%20res)%0A%20%20%20%20Controller-%3E%3EService%3A%20getCart(cartKey)%0A%20%20%20%20%0A%20%20%20%20Service-%3E%3ERedis%3A%20GET%20cartKey%0A%20%20%20%20%0A%20%20%20%20alt%20Panier%20vide%20ou%20expir%C3%A9%0A%20%20%20%20%20%20%20%20Redis--%3E%3EService%3A%20null%0A%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20Empty%20cart%0A%20%20%20%20%20%20%20%20Controller--%3E%3EFrontend%3A%20200%20OK%20%2B%20%7B%20items%3A%20%5B%5D%2C%20total%3A%200%20%7D%0A%20%20%20%20else%20Panier%20existe%0A%20%20%20%20%20%20%20%20Redis--%3E%3EService%3A%20Cart%20data%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service-%3E%3EPrisma%3A%20prisma.product.findMany(%7B%20where%3A%20%7B%20id%3A%20%7B%20in%3A%20productIds%20%7D%20%7D%20%7D)%0A%20%20%20%20%20%20%20%20Note%20over%20Service%2CPrisma%3A%20R%C3%A9cup%C3%A8re%20les%20donn%C3%A9es%20fra%C3%AEches%20des%20produits%0A%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20SELECT%20*%20FROM%20products%20WHERE%20id%20IN%20(1%2C%202%2C%203)%0A%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20Products%20data%0A%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20Products%20array%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service-%3E%3EService%3A%20enrichCartWithProductData(cart%2C%20products)%0A%20%20%20%20%20%20%20%20Service-%3E%3EService%3A%20validateStockAndPrices(cart%2C%20products)%0A%20%20%20%20%20%20%20%20Note%20over%20Service%3A%20V%C3%A9rifie%20si%20prix%2Fstock%20ont%20chang%C3%A9%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20alt%20Changements%20d%C3%A9tect%C3%A9s%0A%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3EService%3A%20updateCartWithLatestData(cart)%0A%20%20%20%20%20%20%20%20%20%20%20%20Service-%3E%3ERedis%3A%20SET%20cartKey%20updatedCart%20EX%20604800%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20Enriched%20cart%0A%20%20%20%20%20%20%20%20Controller--%3E%3EFrontend%3A%20200%20OK%20%2B%20%7B%20items%2C%20total%2C%20warnings%20%7D%0A%20%20%20%20%20%20%20%20Frontend--%3E%3EUser%3A%20Affichage%20panier%20avec%20alertes%20si%20n%C3%A9cessaire%0A%20%20%20%20end%0A%20%20%20%20end%0A%0A%20%20%20%20rect%20rgb(220%2C%20250%2C%20220)%0A%20%20%20%20Note%20over%20User%2CDB%3A%20PASSER%20COMMANDE%20(Checkout)%0A%20%20%20%20User-%3E%3EFrontend%3A%20Click%20%22Commander%22%0A%20%20%20%20Frontend-%3E%3EAPI%3A%20POST%20%2Fapi%2Fcart%2Fcheckout%0A%20%20%20%20%0A%20%20%20%20API-%3E%3EAuthMW%3A%20Verify%20JWT%20Token%0A%20%20%20%20alt%20Non%20authentifi%C3%A9%0A%20%20%20%20%20%20%20%20AuthMW--%3E%3EFrontend%3A%20401%20Unauthorized%0A%20%20%20%20%20%20%20%20Frontend--%3E%3EUser%3A%20Redirect%20to%20%2Flogin%0A%20%20%20%20else%20Authentifi%C3%A9%0A%20%20%20%20%20%20%20%20AuthMW-%3E%3EController%3A%20checkout(req%2C%20res)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Controller-%3E%3EService%3A%20checkoutCart(userId)%0A%20%20%20%20%20%20%20%20Service-%3E%3ERedis%3A%20GET%20cart%3Auser%3A123%0A%20%20%20%20%20%20%20%20Redis--%3E%3EService%3A%20Cart%20data%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service-%3E%3EService%3A%20validateCartBeforeCheckout(cart)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service-%3E%3EPrisma%3A%20prisma.%24transaction(%5B...%5D)%0A%20%20%20%20%20%20%20%20Note%20over%20Prisma%2CDB%3A%20Transaction%20START%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20loop%20Pour%20chaque%20item%0A%20%20%20%20%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20SELECT%20*%20FROM%20products%20WHERE%20id%20%3D%20%3F%20FOR%20UPDATE%0A%20%20%20%20%20%20%20%20%20%20%20%20Note%20over%20DB%3A%20Row%20lock%20pour%20%C3%A9viter%20overselling%0A%20%20%20%20%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20Product%20(locked)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20alt%20Stock%20insuffisant%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20Transaction%20rollback%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20OutOfStockError%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Controller--%3E%3EFrontend%3A%20400%20Bad%20Request%0A%20%20%20%20%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20INSERT%20INTO%20orders%20(customer_id%2C%20total%2C%20status)%0A%20%20%20%20%20%20%20%20DB--%3E%3EPrisma%3A%20Order%20created%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20loop%20Pour%20chaque%20item%0A%20%20%20%20%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20INSERT%20INTO%20order_items%20(...)%0A%20%20%20%20%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20UPDATE%20products%20SET%20stock_quantity%20%3D%20stock_quantity%20-%20%3F%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Prisma-%3E%3EDB%3A%20UPDATE%20customers%20SET%20total_orders%2B%2B%2C%20total_spent%20%2B%3D%20total%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Note%20over%20Prisma%2CDB%3A%20Transaction%20COMMIT%0A%20%20%20%20%20%20%20%20Prisma--%3E%3EService%3A%20Order%20created%20successfully%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service-%3E%3ERedis%3A%20DEL%20cart%3Auser%3A123%0A%20%20%20%20%20%20%20%20Note%20over%20Redis%3A%20Vider%20le%20panier%0A%20%20%20%20%20%20%20%20Redis--%3E%3EService%3A%20OK%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20Service--%3E%3EController%3A%20Order%20data%0A%20%20%20%20%20%20%20%20Controller--%3E%3EFrontend%3A%20201%20Created%20%2B%20Order%0A%20%20%20%20%20%20%20%20Frontend--%3E%3EUser%3A%20Redirect%20to%20%2Forders%2F123%20(confirmation)%0A%20%20%20%20end%0A%20%20%20%20end</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="4582" height="7133"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.13199855000002 142.09742039850002 L 145.13199855000002 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 304.7183714604024 142.09742039850002 L 304.7183714604024 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 537.8946818646875 142.09742039850002 L 537.8946818646875 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 814.2348945516876 142.09742039850002 L 814.2348945516876 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1115.8292118529455 142.09742039850002 L 1115.8292118529455 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1363.2359833778362 142.09742039850002 L 1363.2359833778362 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1593.9498609207933 142.09742039850002 L 1593.9498609207933 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1826.6823694451957 142.09742039850002 L 1826.6823694451957 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2048.820754129266 142.09742039850002 L 2048.820754129266 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 142.09742039850002 L 2223.732957783063 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2452.9832576467347 142.09742039850002 L 2452.9832576467347 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2725.4547031402894 142.09742039850002 L 2725.4547031402894 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 142.09742039850002 L 3084.253953199274 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 142.09742039850002 L 3394.7282520863832 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 142.09742039850002 L 3844.830297555524 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4318.825867194586 142.09742039850002 L 4318.825867194586 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4437.570229644586 142.09742039850002 L 4437.570229644586 7133.765481454509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/></g><g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 160.17295112700003 30.477719695500014 A 15.040952577 15.040952577 0 1 1 160.17294360652437 30.46267874542983" stroke-miterlimit="10" stroke-width="4.485898137" stroke-dasharray=""/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.13199855000002 45.51867227250001 L 145.13199855000002 77.7115883145 M 126.13290055800002 57.12923215650002 L 164.13109654200002 57.12923215650002 M 145.13199855000002 77.7115883145 L 126.13290055800002 107.79349346850002 M 145.13199855000002 77.7115883145 L 164.13109654200002 107.79349346850002" stroke-miterlimit="10" stroke-width="4.485898137"/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="129.65598536640627" y="134.1811295685" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">User</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 190.51873264200006 70.85080292850002 L 418.9180102788048 70.85080292850002 L 418.9180102788048 142.09742039850002 L 190.51873264200006 142.09742039850002 L 190.51873264200006 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="219.14931781050007" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Frontend as Frontend App</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 445.3056463788047 70.85080292850002 L 630.4837173505703 70.85080292850002 L 630.4837173505703 142.09742039850002 L 445.3056463788047 142.09742039850002 L 445.3056463788047 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="473.9362315473047" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">API as Express API</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 656.8713534505704 70.85080292850002 L 971.5984356528047 70.85080292850002 L 971.5984356528047 142.09742039850002 L 656.8713534505704 142.09742039850002 L 656.8713534505704 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="685.5019386190704" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthMW as Auth Middleware (Optional)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 997.9860717528048 70.85080292850002 L 1233.672351953086 70.85080292850002 L 1233.672351953086 142.09742039850002 L 997.9860717528048 142.09742039850002 L 997.9860717528048 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1026.6166569213049" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Controller as CartController</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1260.0599880530863 70.85080292850002 L 1466.4119787025863 70.85080292850002 L 1466.4119787025863 142.09742039850002 L 1260.0599880530863 142.09742039850002 L 1260.0599880530863 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1288.6905732215862" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Service as CartService</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1492.7996148025863 70.85080292850002 L 1695.1001070390005 70.85080292850002 L 1695.1001070390005 142.09742039850002 L 1492.7996148025863 142.09742039850002 L 1492.7996148025863 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1521.4301999710863" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Redis as Redis Cache</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1721.4877431390005 70.85080292850002 L 1931.8769957513912 70.85080292850002 L 1931.8769957513912 142.09742039850002 L 1721.4877431390005 142.09742039850002 L 1721.4877431390005 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1750.1183283075004" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Prisma as Prisma ORM</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1958.264631851391 70.85080292850002 L 2139.376876407141 70.85080292850002 L 2139.376876407141 142.09742039850002 L 1958.264631851391 142.09742039850002 L 1958.264631851391 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1986.8952170198909" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DB as PostgreSQL</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2165.764512507141 70.85080292850002 L 2281.7014030589844 70.85080292850002 L 2281.7014030589844 142.09742039850002 L 2165.764512507141 142.09742039850002 L 2165.764512507141 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2194.395097675641" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Frontend</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2412.5380743947385 70.85080292850002 L 2493.4284408987305 70.85080292850002 L 2493.4284408987305 142.09742039850002 L 2412.5380743947385 142.09742039850002 L 2412.5380743947385 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2441.1686595632386" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">API</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2668.721044851672 70.85080292850002 L 2782.1883614289063 70.85080292850002 L 2782.1883614289063 142.09742039850002 L 2668.721044851672 142.09742039850002 L 2668.721044851672 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2697.3516300201723" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthMW</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3023.848152881848 70.85080292850002 L 3144.6597535166993 70.85080292850002 L 3144.6597535166993 142.09742039850002 L 3023.848152881848 142.09742039850002 L 3023.848152881848 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3052.478738050348" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Controller</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3341.6560241566526 70.85080292850002 L 3447.8004800161134 70.85080292850002 L 3447.8004800161134 142.09742039850002 L 3341.6560241566526 142.09742039850002 L 3341.6560241566526 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3370.2866093251528" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Service</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3793.3937126311644 70.85080292850002 L 3896.266882479883 70.85080292850002 L 3896.266882479883 142.09742039850002 L 3793.3937126311644 142.09742039850002 L 3793.3937126311644 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3822.0242977996645" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Prisma</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 4280.012748761926 70.85080292850002 L 4357.638985627246 70.85080292850002 L 4357.638985627246 142.09742039850002 L 4280.012748761926 142.09742039850002 L 4280.012748761926 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4308.643333930426" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DB</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 4390.199494024426 70.85080292850002 L 4484.940965264746 70.85080292850002 L 4484.940965264746 142.09742039850002 L 4390.199494024426 142.09742039850002 L 4390.199494024426 70.85080292850002 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4418.830079192926" y="115.70978429850003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Redis</text></g></g><g><g><rect fill="white" stroke="none" x="1101.5266246216486" y="194.8726925985" width="165.81170708976563" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1105.4847700366486" y="218.6215650885" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Click "Ajouter au panier"</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.13199855000002 229.17661952850003 L 2220.434503270563 229.17661952850003" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2223.732957783063,229.17661952850003) translate(-2223.732957783063,-229.17661952850003)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2201.1252553181293 219.09113128249294 L 2221.260934923329 229.17661952850003 L 2201.1252553181293 239.26210777450711" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2266.783659809664" y="268.75807367850007" width="143.14889581046876" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2270.7418052246644" y="292.50694616850006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">POST /api/cart/items</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 303.06200060850006 L 2449.6848031342347 303.06200060850006" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2452.9832576467347,303.06200060850006) translate(-2452.9832576467347,-303.06200060850006)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2430.3755551818012 292.97651236249294 L 2450.511234787001 303.06200060850006 L 2430.3755551818012 313.1474888545072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2484.2086270317345" y="342.64345475850007" width="210.0207067235547" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2488.1667724467347" y="366.39232724850007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check authentication (optional)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2452.9832576467347 376.94738168850006 L 2722.1562486277894 376.94738168850006" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2725.4547031402894,376.94738168850006) translate(-2725.4547031402894,-376.94738168850006)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2702.847000675356 366.86189344249294 L 2722.9826802805555 376.94738168850006 L 2702.847000675356 387.0328699345072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2770.531169632223" y="487.7754533085001" width="268.64633233390623" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2774.489315047223" y="511.5243257985001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">addToCart(req, res) [user_id from token]</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2725.4547031402894 522.0793802385001 L 3080.955498686774 522.0793802385001" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3084.253953199274,522.0793802385001) translate(-3084.253953199274,-522.0793802385001)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3061.6462507343404 511.993891992493 L 3081.78193033954 522.0793802385001 L 3061.6462507343404 532.1648684845071" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2756.6800725252892" y="632.9074518585002" width="296.34851128898435" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2760.6382179402895" y="656.6563243485002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">addToCart(req, res) [session_id from cookie]</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2725.4547031402894 667.2113787885002 L 3080.955498686774 667.2113787885002" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3084.253953199274,667.2113787885002) translate(-3084.253953199274,-667.2113787885002)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3061.6462507343404 657.1258905424932 L 3081.78193033954 667.2113787885002 L 3061.6462507343404 677.2968670345072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3115.4793225842736" y="746.3742870885002" width="248.02356011710938" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3119.437467999274" y="770.1231595785002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">addItem(cartKey, productId, quantity)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 780.6782140185002 L 3391.429797573883 780.6782140185002" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,780.6782140185002) translate(-3394.7282520863832,-780.6782140185002)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3372.1205496214498 770.5927257724932 L 3392.2562292266493 780.6782140185002 L 3372.1205496214498 790.7637022645072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3477.696625316598" y="820.2596681685002" width="284.1653142675" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3481.654770731598" y="844.0085406585002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prisma.product.findUnique({ where: { id } })</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 854.5635950985002 L 3841.531843043024 854.5635950985002" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3844.830297555524,854.5635950985002) translate(-3844.830297555524,-854.5635950985002)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3822.2225950905904 844.4781068524932 L 3842.35827469579 854.5635950985002 L 3822.2225950905904 864.6490833445072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3941.209254281832" y="894.1450492485002" width="281.23764092765623" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3945.167399696832" y="917.8939217385002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SELECT * FROM products WHERE id = ?</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 928.4489761785002 L 4315.527412682086 928.4489761785002" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4318.825867194586,928.4489761785002) translate(-4318.825867194586,-928.4489761785002)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4296.218164729653 918.3634879324932 L 4316.3538443348525 928.4489761785002 L 4296.218164729653 938.5344644245072" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4066.4597807100545" y="1039.2770477985002" width="30.73660333" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4070.4179261250547" y="1063.0259202885002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">null</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4318.825867194586 1073.5809747285002 L 3848.128752068024 1073.5809747285002" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3844.830297555524,1073.5809747285002) translate(-3844.830297555524,-1073.5809747285002)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3867.4380000204574 1063.495486482493 L 3847.302320415258 1073.5809747285002 L 3867.4380000204574 1083.6664629745073" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3604.4109731559533" y="1113.1624288785004" width="30.73660333" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3608.3691185709536" y="1136.9113013685003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">null</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 1147.4663558085003 L 3398.0267065988833 1147.4663558085003" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,1147.4663558085003) translate(-3394.7282520863832,-1147.4663558085003)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 1137.3808675624932 L 3397.200274946117 1147.4663558085003 L 3417.3359545513167 1157.5518440545075" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3161.7928296643518" y="1187.0478099585005" width="155.39654595695313" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3165.750975079352" y="1210.7966824485004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ProductNotFoundError</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 1221.3517368885005 L 3087.552407711774 1221.3517368885005" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3084.253953199274,1221.3517368885005) translate(-3084.253953199274,-1221.3517368885005)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3106.8616556642073 1211.2662486424933 L 3086.7259760590077 1221.3517368885005 L 3106.8616556642073 1231.4372251345076" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2601.54211549609" y="1260.9331910385006" width="104.90267999015624" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2605.50026091109" y="1284.6820635285005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">404 Not Found</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 1295.2371179685006 L 2227.031412295563 1295.2371179685006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,1295.2371179685006) translate(-2223.732957783063,-1295.2371179685006)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 1285.1516297224935 L 2226.2049806427967 1295.2371179685006 L 2246.3406602479963 1305.3226062145077" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4036.3058881929646" y="1406.0651895885005" width="91.04438836417968" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4040.264033607965" y="1429.8140620785005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Product data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4318.825867194586 1440.3691165185005 L 3848.128752068024 1440.3691165185005" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3844.830297555524,1440.3691165185005) translate(-3844.830297555524,-1440.3691165185005)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3867.4380000204574 1430.2836282724934 L 3847.302320415258 1440.3691165185005 L 3867.4380000204574 1450.4546047645076" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3568.96360071943" y="1479.9505706685006" width="101.63134820304687" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3572.92174613443" y="1503.6994431585006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Product object</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 1514.2544975985006 L 3398.0267065988833 1514.2544975985006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,1514.2544975985006) translate(-3394.7282520863832,-1514.2544975985006)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 1504.1690093524935 L 3397.200274946117 1514.2544975985006 L 3417.3359545513167 1524.3399858445077" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3425.953621471383" y="1553.8359517485007" width="270.0206609471875" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3429.9117668863832" y="1577.5848242385007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">checkStockAvailability(product, quantity)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 1588.1398786785007 L 3500.2787964863833 1588.1398786785007 L 3500.2787964863833 1622.4438056085007 L 3398.0267065988833 1622.4438056085007" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,1622.4438056085007) translate(-3394.7282520863832,-1622.4438056085007)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 1612.3583173624936 L 3397.200274946117 1622.4438056085007 L 3417.3359545513167 1632.5292938545078" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3181.3597470837854" y="1733.271877228501" width="116.26271111808593" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3185.3178924987856" y="1757.0207497185008" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">OutOfStockError</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 1767.575804158501 L 3087.552407711774 1767.575804158501" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3084.253953199274,1767.575804158501) translate(-3084.253953199274,-1767.575804158501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3106.8616556642073 1757.4903159124938 L 3086.7259760590077 1767.575804158501 L 3106.8616556642073 1777.661292404508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2515.983811663082" y="1807.157258308501" width="276.01928765617185" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2519.9419570780824" y="1830.906130798501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">400 Bad Request (Stock: 1, Demandé: 2)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 1841.461185238501 L 2227.031412295563 1841.461185238501" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,1841.461185238501) translate(-2223.732957783063,-1841.461185238501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 1831.3756969924939 L 2226.2049806427967 1841.461185238501 L 2246.3406602479963 1851.5466734845081" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3870.2369175940394" y="1952.289256858501" width="91.82464654289062" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3874.1950630090396" y="1976.038129348501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GET cartKey</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 1986.593183788501 L 4434.271775132086 1986.593183788501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4437.570229644586,1986.593183788501) translate(-4437.570229644586,-1986.593183788501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4414.962527179653 1976.5076955424938 L 4435.098206784853 1986.593183788501 L 4414.962527179653 1996.678672034508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3830.7236958533167" y="2026.1746379385008" width="170.85109002433595" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3834.681841268317" y="2049.923510428501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Current cart data (JSON)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4437.570229644586 2060.478564868501 L 3398.0267065988833 2060.478564868501" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,2060.478564868501) translate(-3394.7282520863832,-2060.478564868501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 2050.393076622494 L 3397.200274946117 2060.478564868501 L 3417.3359545513167 2070.564053114508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3425.953621471383" y="2100.060019018501" width="267.02856499992185" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3429.9117668863832" y="2123.808891508501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">updateCartItems(cart, product, quantity)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 2134.3639459485007 L 3500.2787964863833 2134.3639459485007 L 3500.2787964863833 2168.667872878501 L 3398.0267065988833 2168.667872878501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,2168.667872878501) translate(-3394.7282520863832,-2168.667872878501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 2158.582384632494 L 3397.200274946117 2168.667872878501 L 3417.3359545513167 2178.753361124508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3803.000009635055" y="2208.249327028501" width="226.29846246085938" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3806.958155050055" y="2231.9981995185008" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SET cartKey cartData EX 604800</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 2242.553253958501 L 4434.271775132086 2242.553253958501" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4437.570229644586,2242.553253958501) translate(-4437.570229644586,-2242.553253958501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4414.962527179653 2232.467765712494 L 4435.098206784853 2242.553253958501 L 4414.962527179653 2252.638742204508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3901.6005421667933" y="2282.134708108501" width="29.097397397382814" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3905.5586875817935" y="2305.883580598501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">OK</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4437.570229644586 2316.438635038501 L 3398.0267065988833 2316.438635038501" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,2316.438635038501) translate(-3394.7282520863832,-2316.438635038501)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 2306.353146792494 L 3397.200274946117 2316.438635038501 L 3417.3359545513167 2326.5241232845083" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3193.5644666272424" y="2356.020089188501" width="91.85327203117187" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3197.5226120422426" y="2379.768961678501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Updated cart</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 2390.3240161185013 L 3087.552407711774 2390.3240161185013" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3084.253953199274,2390.3240161185013) translate(-3084.253953199274,-2390.3240161185013)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3106.8616556642073 2380.238527872494 L 3086.7259760590077 2390.3240161185013 L 3106.8616556642073 2400.4095043645084" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2577.708909319332" y="2429.905470268501" width="152.56909234367188" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2581.6670547343324" y="2453.654342758501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">200 OK + { cart, total }</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 2464.2093971985014 L 2227.031412295563 2464.2093971985014" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,2464.2093971985014) translate(-2223.732957783063,-2464.2093971985014)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 2454.1239089524943 L 2226.2049806427967 2464.2093971985014 L 2246.3406602479963 2474.2948854445085" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1103.0584773438165" y="2503.7908513485013" width="162.7480016454297" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1107.0166227588165" y="2527.5397238385012" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Badge panier mis à jour</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 2538.0947782785015 L 148.43045306250002 2538.0947782785015" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(145.13199855000002,2538.0947782785015) translate(-145.13199855000002,-2538.0947782785015)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 167.73970101493347 2528.0092900324944 L 147.6040214097338 2538.0947782785015 L 167.73970101493347 2548.1802665245086" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1127.1028422730158" y="2656.839140728501" width="114.65927178703124" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1131.0609876880158" y="2680.588013218501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Navigate to /cart</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.13199855000002 2691.1430676585014 L 2220.434503270563 2691.1430676585014" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2223.732957783063,2691.1430676585014) translate(-2223.732957783063,-2691.1430676585014)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2201.1252553181293 2681.0575794124943 L 2221.260934923329 2691.1430676585014 L 2201.1252553181293 2701.2285559045085" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2291.221732014254" y="2730.7245218085013" width="94.27275140128906" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2295.1798774292542" y="2754.4733942985013" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GET /api/cart</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 2765.0284487385015 L 2449.6848031342347 2765.0284487385015" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2452.9832576467347,2765.0284487385015) translate(-2452.9832576467347,-2765.0284487385015)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2430.3755551818012 2754.9429604924944 L 2450.511234787001 2765.0284487385015 L 2430.3755551818012 2775.1139369845087" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2710.8916993268517" y="2804.6099028885014" width="115.45381219230468" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2714.849844741852" y="2828.3587753785014" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getCart(req, res)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2452.9832576467347 2838.9138298185017 L 3080.955498686774 2838.9138298185017" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3084.253953199274,2838.9138298185017) translate(-3084.253953199274,-2838.9138298185017)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3061.6462507343404 2828.8283415724945 L 3081.78193033954 2838.9138298185017 L 3061.6462507343404 2848.9993180645088" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3181.764196546676" y="2878.4952839685016" width="115.45381219230468" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3185.722341961676" y="2902.2441564585015" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getCart(cartKey)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 2912.7992108985018 L 3391.429797573883 2912.7992108985018" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,2912.7992108985018) translate(-3394.7282520863832,-2912.7992108985018)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3372.1205496214498 2902.7137226524947 L 3392.2562292266493 2912.7992108985018 L 3372.1205496214498 2922.884699144509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3870.2369175940394" y="2952.3806650485017" width="91.82464654289062" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3874.1950630090396" y="2976.1295375385016" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GET cartKey</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 2986.684591978502 L 4434.271775132086 2986.684591978502" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4437.570229644586,2986.684591978502) translate(-4437.570229644586,-2986.684591978502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4414.962527179653 2976.5991037324948 L 4435.098206784853 2986.684591978502 L 4414.962527179653 2996.770080224509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3900.7809392004847" y="3097.5126635985016" width="30.73660333" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3904.739084615485" y="3121.2615360885015" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">null</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4437.570229644586 3131.816590528502 L 3398.0267065988833 3131.816590528502" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,3131.816590528502) translate(-3394.7282520863832,-3131.816590528502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 3121.7311022824947 L 3397.200274946117 3131.816590528502 L 3417.3359545513167 3141.902078774509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3200.5043393689416" y="3171.3980446785017" width="77.97352654777343" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3204.462484783942" y="3195.1469171685017" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Empty cart</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 3205.701971608502 L 3087.552407711774 3205.701971608502" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3084.253953199274,3205.701971608502) translate(-3084.253953199274,-3205.701971608502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3106.8616556642073 3195.616483362495 L 3086.7259760590077 3205.701971608502 L 3106.8616556642073 3215.787459854509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2556.1197903618126" y="3245.283425758502" width="195.74733025871095" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2560.077935776813" y="3269.032298248502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">200 OK + { items: [], total: 0 }</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 3279.587352688502 L 2227.031412295563 3279.587352688502" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,3279.587352688502) translate(-2223.732957783063,-3279.587352688502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 3269.501864442495 L 2226.2049806427967 3279.587352688502 L 2246.3406602479963 3289.672840934509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3882.04078111943" y="3390.4154243085018" width="68.21691949210937" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3885.99892653443" y="3414.1642967985017" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Cart data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4437.570229644586 3424.719351238502 L 3398.0267065988833 3424.719351238502" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,3424.719351238502) translate(-3394.7282520863832,-3424.719351238502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 3414.633862992495 L 3397.200274946117 3424.719351238502 L 3417.3359545513167 3434.804839484509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3425.953621471383" y="3464.300805388502" width="387.6512761815625" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3429.9117668863832" y="3488.049677878502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prisma.product.findMany({ where: { id: { in: productIds } } })</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 3498.604732318502 L 3841.531843043024 3498.604732318502" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3844.830297555524,3498.604732318502) translate(-3844.830297555524,-3498.604732318502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3822.2225950905904 3488.519244072495 L 3842.35827469579 3498.604732318502 L 3822.2225950905904 3508.690220564509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3916.9787702730428" y="3538.186186468502" width="329.69860894523435" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3920.936915688043" y="3561.935058958502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SELECT * FROM products WHERE id IN (1, 2, 3)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 3572.490113398502 L 4315.527412682086 3572.490113398502" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4318.825867194586,3572.490113398502) translate(-4318.825867194586,-3572.490113398502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4296.218164729653 3562.404625152495 L 4316.3538443348525 3572.490113398502 L 4296.218164729653 3582.5756016445093" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4032.640894906832" y="3612.071567548502" width="98.3743749364453" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4036.599040321832" y="3635.820440038502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Products data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4318.825867194586 3646.3754944785023 L 3848.128752068024 3646.3754944785023" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3844.830297555524,3646.3754944785023) translate(-3844.830297555524,-3646.3754944785023)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3867.4380000204574 3636.290006232495 L 3847.302320415258 3646.3754944785023 L 3867.4380000204574 3656.4609827245094" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3568.158310497262" y="3685.9569486285022" width="103.2419286473828" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3572.116455912262" y="3709.705821118502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Products array</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 3720.2608755585024 L 3398.0267065988833 3720.2608755585024" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,3720.2608755585024) translate(-3394.7282520863832,-3720.2608755585024)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 3710.1753873124953 L 3397.200274946117 3720.2608755585024 L 3417.3359545513167 3730.3463638045096" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3425.953621471383" y="3759.8423297085023" width="284.92404229484373" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3429.9117668863832" y="3783.5912021985023" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">enrichCartWithProductData(cart, products)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 3794.146256638502 L 3500.2787964863833 3794.146256638502 L 3500.2787964863833 3828.4501835685023 L 3398.0267065988833 3828.4501835685023" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,3828.4501835685023) translate(-3394.7282520863832,-3828.4501835685023)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 3818.364695322495 L 3397.200274946117 3828.4501835685023 L 3417.3359545513167 3838.5356718145094" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3425.953621471383" y="3868.031637718502" width="260.50024468742185" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3429.9117668863832" y="3891.780510208502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">validateStockAndPrices(cart, products)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 3902.335564648502 L 3500.2787964863833 3902.335564648502 L 3500.2787964863833 3936.639491578502 L 3398.0267065988833 3936.639491578502" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,3936.639491578502) translate(-3394.7282520863832,-3936.639491578502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 3926.554003332495 L 3397.200274946117 3936.639491578502 L 3417.3359545513167 3946.7249798245093" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3425.953621471383" y="4047.4675631985024" width="214.8739782079297" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3429.9117668863832" y="4071.2164356885023" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">updateCartWithLatestData(cart)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 4081.771490128502 L 3500.2787964863833 4081.771490128502 L 3500.2787964863833 4116.075417058502 L 3398.0267065988833 4116.075417058502" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,4116.075417058502) translate(-3394.7282520863832,-4116.075417058502)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 4105.989928812495 L 3397.200274946117 4116.075417058502 L 3417.3359545513167 4126.1609053045095" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3790.358636954391" y="4155.656871208503" width="251.5812078221875" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3794.316782369391" y="4179.405743698503" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SET cartKey updatedCart EX 604800</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 4189.9607981385025 L 4434.271775132086 4189.9607981385025" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4437.570229644586,4189.9607981385025) translate(-4437.570229644586,-4189.9607981385025)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4414.962527179653 4179.875309892495 L 4435.098206784853 4189.9607981385025 L 4414.962527179653 4200.04628638451" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3192.3475858289025" y="4269.123706438503" width="94.28703362785156" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3196.3057312439028" y="4292.872578928504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Enriched cart</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 4303.427633368503 L 3087.552407711774 4303.427633368503" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3084.253953199274,4303.427633368503) translate(-3084.253953199274,-4303.427633368503)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3106.8616556642073 4293.342145122496 L 3086.7259760590077 4303.427633368503 L 3106.8616556642073 4313.51312161451" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2539.008134172848" y="4343.009087518503" width="229.97064263664063" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2542.966279587848" y="4366.757960008504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">200 OK + { items, total, warnings }</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 4377.313014448503 L 2227.031412295563 4377.313014448503" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,4377.313014448503) translate(-2223.732957783063,-4377.313014448503)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 4367.227526202496 L 2226.2049806427967 4377.313014448503 L 2246.3406602479963 4387.39850269451" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1041.261808337469" y="4416.894468598503" width="286.341339658125" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1045.2199537524689" y="4440.643341088504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Affichage panier avec alertes si nécessaire</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 4451.198395528503 L 148.43045306250002 4451.198395528503" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(145.13199855000002,4451.198395528503) translate(-145.13199855000002,-4451.198395528503)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 167.73970101493347 4441.112907282496 L 147.6040214097338 4451.198395528503 L 167.73970101493347 4461.28388377451" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1117.0240992920587" y="4530.361303828504" width="134.81675774894532" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1120.9822447070587" y="4554.110176318504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Click "Commander"</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.13199855000002 4564.665230758504 L 2220.434503270563 4564.665230758504" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2223.732957783063,4564.665230758504) translate(-2223.732957783063,-4564.665230758504)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2201.1252553181293 4554.5797425124965 L 2221.260934923329 4564.665230758504 L 2201.1252553181293 4574.750719004511" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2254.9583271680626" y="4604.246684908504" width="166.79956109367188" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2258.916472583063" y="4627.995557398504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">POST /api/cart/checkout</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 4638.550611838504 L 2449.6848031342347 4638.550611838504" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2452.9832576467347,4638.550611838504) translate(-2452.9832576467347,-4638.550611838504)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2430.3755551818012 4628.465123592497 L 2450.511234787001 4638.550611838504 L 2430.3755551818012 4648.636100084511" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2528.235085771969" y="4678.132065988504" width="121.96778924308593" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2532.193231186969" y="4701.8809384785045" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verify JWT Token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2452.9832576467347 4712.435992918504 L 2722.1562486277894 4712.435992918504" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(2725.4547031402894,4712.435992918504) translate(-2725.4547031402894,-4712.435992918504)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2702.847000675356 4702.350504672497 L 2722.9826802805555 4712.435992918504 L 2702.847000675356 4722.521481164511" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2412.7688484988244" y="4823.2640645385045" width="123.64996392570312" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2416.7269939138246" y="4847.012937028505" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">401 Unauthorized</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2725.4547031402894 4857.567991468504 L 2227.031412295563 4857.567991468504" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,4857.567991468504) translate(-2223.732957783063,-4857.567991468504)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 4847.482503222497 L 2226.2049806427967 4857.567991468504 L 2246.3406602479963 4867.653479714511" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1125.4707774536798" y="4897.149445618505" width="117.92340142570312" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1129.4289228686798" y="4920.898318108505" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Redirect to /login</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 4931.453372548504 L 148.43045306250002 4931.453372548504" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(145.13199855000002,4931.453372548504) translate(-145.13199855000002,-4931.453372548504)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 167.73970101493347 4921.367884302497 L 147.6040214097338 4931.453372548504 L 167.73970101493347 4941.5388607945115" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2841.826785782125" y="5042.281444168505" width="126.0550847753125" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2845.7849311971254" y="5066.030316658505" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">checkout(req, res)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2725.4547031402894 5076.585371098505 L 3080.955498686774 5076.585371098505" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3084.253953199274,5076.585371098505) translate(-3084.253953199274,-5076.585371098505)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3061.6462507343404 5066.499882852498 L 3081.78193033954 5076.585371098505 L 3061.6462507343404 5086.670859344512" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3167.0934812146447" y="5116.166825248505" width="144.7952428563672" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3171.051626629645" y="5139.9156977385055" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">checkoutCart(userId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 5150.470752178505 L 3391.429797573883 5150.470752178505" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,5150.470752178505) translate(-3394.7282520863832,-5150.470752178505)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3372.1205496214498 5140.385263932498 L 3392.2562292266493 5150.470752178505 L 3372.1205496214498 5160.556240424512" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3852.305643179977" y="5190.052206328505" width="127.68719537101562" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3856.263788594977" y="5213.801078818506" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GET cart:user:123</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 5224.356133258505 L 4434.271775132086 5224.356133258505" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4437.570229644586,5224.356133258505) translate(-4437.570229644586,-5224.356133258505)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4414.962527179653 5214.270645012498 L 4435.098206784853 5224.356133258505 L 4414.962527179653 5234.441621504512" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3882.04078111943" y="5263.937587408505" width="68.21691949210937" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3885.99892653443" y="5287.686459898506" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Cart data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4437.570229644586 5298.241514338505 L 3398.0267065988833 5298.241514338505" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,5298.241514338505) translate(-3394.7282520863832,-5298.241514338505)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 5288.156026092498 L 3397.200274946117 5298.241514338505 L 3417.3359545513167 5308.327002584512" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3425.953621471383" y="5337.822968488505" width="225.46807916007813" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3429.9117668863832" y="5361.571840978505" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">validateCartBeforeCheckout(cart)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 5372.126895418505 L 3500.2787964863833 5372.126895418505 L 3500.2787964863833 5406.430822348505 L 3398.0267065988833 5406.430822348505" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3394.7282520863832,5406.430822348505) translate(-3394.7282520863832,-5406.430822348505)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 5396.345334102498 L 3397.200274946117 5406.430822348505 L 3417.3359545513167 5416.516310594512" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3536.794685924508" y="5446.012276498505" width="165.96917779289063" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3540.7528313395082" y="5469.761148988506" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prisma.$transaction([...])</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 5480.316203428505 L 3841.531843043024 5480.316203428505" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(3844.830297555524,5480.316203428505) translate(-3844.830297555524,-5480.316203428505)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3822.2225950905904 5470.230715182498 L 3842.35827469579 5480.316203428505 L 3822.2225950905904 5490.401691674512" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3892.476244943453" y="5591.144275048506" width="378.70361382804685" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3896.434390358453" y="5614.893147538506" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">SELECT * FROM products WHERE id = ? FOR UPDATE</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 5625.4482019785055 L 4315.527412682086 5625.4482019785055" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4318.825867194586,5625.4482019785055) translate(-4318.825867194586,-5625.4482019785055)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4296.218164729653 5615.362713732498 L 4316.3538443348525 5625.4482019785055 L 4296.218164729653 5635.533690224513" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4024.502039926363" y="5665.029656128506" width="114.6520848973828" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4028.4601853413633" y="5688.778528618506" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Product (locked)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4318.825867194586 5699.333583058506 L 3848.128752068024 5699.333583058506" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3844.830297555524,5699.333583058506) translate(-3844.830297555524,-5699.333583058506)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3867.4380000204574 5689.2480948124985 L 3847.302320415258 5699.333583058506 L 3867.4380000204574 5709.419071304513" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3550.5026250724572" y="5810.161654678506" width="138.5532994969922" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3554.4607704874575" y="5833.910527168507" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Transaction rollback</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 5844.465581608506 L 3398.0267065988833 5844.465581608506" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,5844.465581608506) translate(-3394.7282520863832,-5844.465581608506)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 5834.380093362499 L 3397.200274946117 5844.465581608506 L 3417.3359545513167 5854.551069854513" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3181.3597470837854" y="5884.047035758506" width="116.26271111808593" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3185.3178924987856" y="5907.795908248507" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">OutOfStockError</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 5918.350962688506 L 3087.552407711774 5918.350962688506" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3084.253953199274,5918.350962688506) translate(-3084.253953199274,-5918.350962688506)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3106.8616556642073 5908.265474442499 L 3086.7259760590077 5918.350962688506 L 3106.8616556642073 5928.436450934513" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2593.388940142086" y="5957.9324168385065" width="121.20903069816406" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2597.3470855570863" y="5981.681289328507" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">400 Bad Request</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 5992.236343768506 L 2227.031412295563 5992.236343768506" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,5992.236343768506) translate(-2223.732957783063,-5992.236343768506)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 5982.150855522499 L 2226.2049806427967 5992.236343768506 L 2246.3406602479963 6002.321832014513" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3920.4970350435506" y="6110.980706218507" width="322.66207940421873" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3924.455180458551" y="6134.729578708508" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">INSERT INTO orders (customer_id, total, status)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 6145.284633148507 L 4315.527412682086 6145.284633148507" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4318.825867194586,6145.284633148507) translate(-4318.825867194586,-6145.284633148507)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4296.218164729653 6135.1991449025 L 4316.3538443348525 6145.284633148507 L 4296.218164729653 6155.370121394514" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="4032.648051278902" y="6184.866087298507" width="98.36006219230468" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4036.6061966939023" y="6208.614959788508" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Order created</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4318.825867194586 6219.170014228507 L 3848.128752068024 6219.170014228507" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3844.830297555524,6219.170014228507) translate(-3844.830297555524,-6219.170014228507)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3867.4380000204574 6209.0845259825 L 3847.302320415258 6219.170014228507 L 3867.4380000204574 6229.255502474514" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3977.945109384371" y="6329.998085848508" width="207.7659459813672" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3981.903254799371" y="6353.746958338508" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">INSERT INTO order_items (...)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 6364.302012778508 L 4315.527412682086 6364.302012778508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4318.825867194586,6364.302012778508) translate(-4318.825867194586,-6364.302012778508)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4296.218164729653 6354.2165245325 L 4316.3538443348525 6364.302012778508 L 4296.218164729653 6374.387501024515" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3887.544306772066" y="6403.883466928508" width="388.56759698234373" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3891.5024521870664" y="6427.632339418508" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">UPDATE products SET stock_quantity = stock_quantity - ?</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 6438.187393858508 L 4315.527412682086 6438.187393858508" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4318.825867194586,6438.187393858508) translate(-4318.825867194586,-6438.187393858508)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4296.218164729653 6428.101905612501 L 4316.3538443348525 6438.187393858508 L 4296.218164729653 6448.272882104515" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3876.055666940523" y="6517.350302158508" width="252.05365044914063" height="41.164712316"/><rect fill="white" stroke="none" x="3876.055666940523" y="6517.350302158508" width="167.40747124992188" height="41.164712316"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3880.0138123555234" y="6545.848949146508" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">UPDATE customers SET total_orders</text><text fill="black" stroke="none" font-family="sans-serif" font-size="13.2pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4124.151171974664" y="6545.848949146508" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">, total_spent += total</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 6558.5150144745085 L 4315.527412682086 6558.5150144745085" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4318.825867194586,6558.5150144745085) translate(-4318.825867194586,-6558.5150144745085)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4296.218164729653 6548.429526228501 L 4316.3538443348525 6558.5150144745085 L 4296.218164729653 6568.600502720516" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3529.049522960641" y="6598.096468624509" width="181.459503720625" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3533.007668375641" y="6621.845341114509" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Order created successfully</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3844.830297555524 6632.400395554509 L 3398.0267065988833 6632.400395554509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,6632.400395554509) translate(-3394.7282520863832,-6632.400395554509)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 6622.3149073085015 L 3397.200274946117 6632.400395554509 L 3417.3359545513167 6642.485883800516" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3853.114526846969" y="6671.981849704509" width="126.06942803703124" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3857.0726722619693" y="6695.730722194509" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DEL cart:user:123</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 6706.285776634509 L 4434.271775132086 6706.285776634509" stroke-miterlimit="10" stroke-width="2.1989696750000003"/><g transform="translate(4437.570229644586,6706.285776634509) translate(-4437.570229644586,-6706.285776634509)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4414.962527179653 6696.200288388502 L 4435.098206784853 6706.285776634509 L 4414.962527179653 6716.371264880516" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3901.6005421667933" y="6745.867230784509" width="29.097397397382814" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3905.5586875817935" y="6769.616103274509" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">OK</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 4437.570229644586 6780.171157714509 L 3398.0267065988833 6780.171157714509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3394.7282520863832,6780.171157714509) translate(-3394.7282520863832,-6780.171157714509)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3417.3359545513167 6770.085669468502 L 3397.200274946117 6780.171157714509 L 3417.3359545513167 6790.256645960516" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="3200.4935971814416" y="6819.752611864509" width="77.99501092277343" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="3204.451742596442" y="6843.50148435451" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Order data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3394.7282520863832 6854.056538794509 L 3087.552407711774 6854.056538794509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(3084.253953199274,6854.056538794509) translate(-3084.253953199274,-6854.056538794509)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3106.8616556642073 6843.971050548502 L 3086.7259760590077 6854.056538794509 L 3106.8616556642073 6864.142027040516" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="2582.601540850094" y="6893.637992944509" width="142.78382928214845" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="2586.559686265094" y="6917.38686543451" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">201 Created + Order</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3084.253953199274 6927.941919874509 L 2227.031412295563 6927.941919874509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(2223.732957783063,6927.941919874509) translate(-2223.732957783063,-6927.941919874509)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2246.3406602479963 6917.856431628502 L 2226.2049806427967 6927.941919874509 L 2246.3406602479963 6938.027408120516" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><rect fill="white" stroke="none" x="1059.0713862793634" y="6967.523374024509" width="250.72218377433595" height="34.30392693"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1063.0295316943634" y="6991.27224651451" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Redirect to /orders/123 (confirmation)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2223.732957783063 7001.827300954509 L 148.43045306250002 7001.827300954509" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(145.13199855000002,7001.827300954509) translate(-145.13199855000002,-7001.827300954509)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 167.73970101493347 6991.741812708502 L 147.6040214097338 7001.827300954509 L 167.73970101493347 7011.912789200516" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2633.0979767902895 416.5288358385001 L 3176.6106795492738 416.5288358385001 L 3176.6106795492738 706.7928329385002 L 2633.0979767902895 706.7928329385002 L 2633.0979767902895 416.5288358385001 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2633.0979767902895 416.5288358385001 L 2633.0979767902895 448.19399915850005 L 2699.56204598736 448.19399915850005 L 2715.39462764736 432.3614174985001 L 2715.39462764736 416.5288358385001 L 2633.0979767902895 416.5288358385001" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="2659.4856128902893" y="437.63894471850006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="2737.8241183323594" y="418.6398467265001" width="127.84509332023437" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="2741.7822637473596" y="437.63894471850006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Utilisateur connecté]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2633.0979767902895 561.6608343885001 L 3176.6106795492738 561.6608343885001" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="2737.8241183323594" y="563.7718452765001" width="127.84509332023437" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="2741.7822637473596" y="582.7709432685001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Utilisateur anonyme]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 26.38763610000001 968.0304303285002 L 4556.314592094586 968.0304303285002 L 4556.314592094586 2617.2576865785013 L 26.38763610000001 2617.2576865785013 L 26.38763610000001 968.0304303285002 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 26.38763610000001 968.0304303285002 L 26.38763610000001 999.6955936485002 L 92.85170529707032 999.6955936485002 L 108.68428695707033 983.8630119885001 L 108.68428695707033 968.0304303285002 L 26.38763610000001 968.0304303285002" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="52.77527220000001" y="989.1405392085002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="131.11377764207035" y="970.1414412165002" width="120.63983208976562" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="135.07192305707034" y="989.1405392085002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Produit non trouvé]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 26.38763610000001 1334.8185721185007 L 4556.314592094586 1334.8185721185007" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="131.11377764207035" y="1336.9295830065005" width="95.88543755851562" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="135.07192305707034" y="1355.9286809985006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Produit trouvé]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 1662.0252597585009 L 4529.926955994586 1662.0252597585009 L 4529.926955994586 2577.6762324285014 L 52.77527220000002 2577.6762324285014 L 52.77527220000002 1662.0252597585009 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 1662.0252597585009 L 52.77527220000002 1693.6904230785008 L 119.23934139707033 1693.6904230785008 L 135.07192305707034 1677.8578414185008 L 135.07192305707034 1662.0252597585009 L 52.77527220000002 1662.0252597585009" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="79.16290830000003" y="1683.1353686385007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="157.50141374207035" y="1664.1362706465006" width="110.23292596183593" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="1683.1353686385007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Stock insuffisant]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 1881.0426393885011 L 4529.926955994586 1881.0426393885011" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="157.50141374207035" y="1883.153650276501" width="68.52504021964843" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="1902.152748268501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Stock OK]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 3026.266046128502 L 4556.314592094586 3026.266046128502 L 4556.314592094586 4490.7798496785035 L 52.77527220000002 4490.7798496785035 L 52.77527220000002 3026.266046128502 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 3026.266046128502 L 52.77527220000002 3057.9312094485017 L 119.23934139707033 3057.9312094485017 L 135.07192305707034 3042.0986277885017 L 135.07192305707034 3026.266046128502 L 52.77527220000002 3026.266046128502" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="79.16290830000003" y="3047.376155008502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="157.50141374207035" y="3028.377057016502" width="133.7272496923047" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="3047.376155008502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Panier vide ou expiré]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 3319.168806838502 L 4556.314592094586 3319.168806838502" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="157.50141374207035" y="3321.279817726502" width="88.10746819816406" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="3340.278915718502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Panier existe]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3302.3715257363833 3976.220945728502 L 4529.926955994586 3976.220945728502 L 4529.926955994586 4229.542252288503 L 3302.3715257363833 4229.542252288503 L 3302.3715257363833 3976.220945728502 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3302.3715257363833 3976.220945728502 L 3302.3715257363833 4007.886109048502 L 3368.8355949334536 4007.886109048502 L 3384.6681765934536 3992.053527388502 L 3384.6681765934536 3976.220945728502 L 3302.3715257363833 3976.220945728502" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="3328.759161836383" y="3997.331054608502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="3407.097667278453" y="3978.3319566165023" width="144.1457067235547" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="3411.0558126934534" y="3997.331054608502" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Changements détectés]</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 4752.017447068504 L 4529.926955994586 4752.017447068504 L 4529.926955994586 7041.4087551045095 L 52.77527220000002 7041.4087551045095 L 52.77527220000002 4752.017447068504 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 4752.017447068504 L 52.77527220000002 4783.682610388504 L 119.23934139707033 4783.682610388504 L 135.07192305707034 4767.850028728504 L 135.07192305707034 4752.017447068504 L 52.77527220000002 4752.017447068504" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="79.16290830000003" y="4773.127555948504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="157.50141374207035" y="4754.128457956504" width="101.0917821630078" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="4773.127555948504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Non authentifié]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 52.77527220000002 4971.034826698505 L 4529.926955994586 4971.034826698505" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray="6.596909025"/></g><g/><g><rect fill="white" stroke="none" x="157.50141374207035" y="4973.145837586504" width="76.9788671239453" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="161.45955915707034" y="4992.144935578504" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Authentifié]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2104.9885953330627 5519.8976575785055 L 4411.182593544586 5519.8976575785055 L 4411.182593544586 6071.399252068507 L 2104.9885953330627 6071.399252068507 L 2104.9885953330627 5519.8976575785055 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2104.9885953330627 5519.8976575785055 L 2104.9885953330627 5551.562820898505 L 2182.5182620643127 5551.562820898505 L 2198.3508437243127 5535.730239238505 L 2198.3508437243127 5519.8976575785055 L 2104.9885953330627 5519.8976575785055" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="2131.3762314330625" y="5541.007766458505" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><g><rect fill="white" stroke="none" x="2220.780334409312" y="5522.008668466505" width="114.15055901847656" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="2224.7384798243124" y="5541.007766458505" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Pour chaque item]</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 2131.376231433063 5738.915037208506 L 3937.187023905524 5738.915037208506 L 3937.187023905524 6031.817797918507 L 2131.376231433063 6031.817797918507 L 2131.376231433063 5738.915037208506 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 2131.376231433063 5738.915037208506 L 2131.376231433063 5770.580200528506 L 2197.8403006301332 5770.580200528506 L 2213.672882290133 5754.747618868506 L 2213.672882290133 5738.915037208506 L 2131.376231433063 5738.915037208506" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="2157.7638675330627" y="5760.025146088506" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="2236.1023729751328" y="5741.026048096505" width="110.23292596183593" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="2240.060518390133" y="5760.025146088506" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Stock insuffisant]</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 3752.473571205524 6258.7514683785075 L 4411.182593544586 6258.7514683785075 L 4411.182593544586 6477.768848008508 L 3752.473571205524 6477.768848008508 L 3752.473571205524 6258.7514683785075 Z" stroke-miterlimit="10" stroke-width="3.7696623000000002" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 3752.473571205524 6258.7514683785075 L 3752.473571205524 6290.416631698507 L 3830.003237936774 6290.416631698507 L 3845.835819596774 6274.5840500385075 L 3845.835819596774 6258.7514683785075 L 3752.473571205524 6258.7514683785075" stroke-miterlimit="10" stroke-width="3.7696623000000002"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="3778.8612073055237" y="6279.861577258507" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><g><rect fill="white" stroke="none" x="3868.2653102817735" y="6260.862479266507" width="114.15055901847656" height="27.443141544000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="3872.2234556967737" y="6279.861577258507" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Pour chaque item]</text></g></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></g></svg>